{% extends 'dashboard/base_dashboard.html' %}
{% load crispy_forms_filters %}

{% load my_tags %}

{% block content-dashboard %}
   
<section class="hero is-info welcome is-small">
  <div class="hero-body">
      <div class="container">
          <h1 class="title">
              Hello,
          </h1>
          <h2 class="subtitle">
              I hope you are having a great day!
          </h2>
      </div>
  </div>
</section>
<hr>
<section class="info-tiles">
  <div class="tile is-ancestor has-text-centered">
      <div class="tile is-parent">
          <article class="tile is-child box">
              <p class="title">439k</p>
              <p class="subtitle">Users</p>
          </article>
      </div>
      <div class="tile is-parent">
          <article class="tile is-child box">
              <p class="title">59k</p>
              <p class="subtitle">Products</p>
          </article>
      </div>
      <div class="tile is-parent">
          <article class="tile is-child box">
              <p class="title">3.4k</p>
              <p class="subtitle">Open Orders</p>
          </article>
      </div>
      <div class="tile is-parent">
          <article class="tile is-child box">
              <p class="title">19</p>
              <p class="subtitle">Exceptions</p>
          </article>
      </div>
  </div>
</section>

<hr />
<form method="get">
  {{ filter.form|crispy }}
  <div class="control">
    <button type="submit" class="button is-block is-primary is-fullwidth is-medium">Filter</button>
  </div>
</form>



<a href="{% url 'leads:lead-create' %}">
  <span class="tag is-success">Create Lead <i class="fa-solid fa-circle-plus fa-fw"></i></span>
</a>

<table class="table">
  <thead>
    <tr>
      <th><abbr title="Position">ID</abbr></th>
      <th>Name</th>
      <th><abbr title="Played">Update</abbr></th>
      <th><abbr title="Goals for">Delete</abbr></th>
      <th>Qualification or relegation</th>
    </tr>
  </thead>
  
  {% for lead in leads %}
    <tbody>
      <tr>
        <th>{{ lead.id }}</th>
        <td>
          <a href="{% url 'leads:lead-detail' lead.id %}" title="Details">{{ lead.first_name }}  {{ lead.last_name }}</a>
        </td>
        <td>
          <span class="tag is-primary"><i class="fa-solid fa-pen"></i></span>
        </td>
        <td>
          <span class="tag is-danger"><i class="fa-solid fa-trash"></i></span>
        </td>
        <td>Qualification for the <a href="https://en.wikipedia.org/wiki/2016%E2%80%9317_UEFA_Champions_League#Group_stage" title="2016â€“17 UEFA Champions League">Champions League group stage</a></td>
      </tr>
    </tbody>
  {% endfor %}

</table>


{% if is_paginated %}
<nav class="pagination" role="navigation" aria-label="pagination">

  {% if page_obj.previous_page_number != 0 %}
    <a class="pagination-previous" href="?{% param_replace page=page_obj.previous_page_number %}">Previous</a>
  {% else %}
    <a class="pagination-previous is-disabled">Previous</a>
  {% endif %}

  {% if page_obj.next_page_number <= paginator.num_pages %}
    <a class="pagination-next" href="?{% param_replace page=page_obj.next_page_number %}">Next</a>
  {% else %}
    <a class="pagination-next is-disabled">Next</a>
  {% endif %}

  
  <ul class="pagination-list">

    {% if page_obj.has_previous %}
      <li>
        <a class="pagination-link" href="?{% param_replace page=1 %}">First</a>
      </li>
    {% endif %}

    <li>
      <span class="pagination-ellipsis">&hellip;</span>
    </li>
    
    {% if page_obj.has_previous %}
      {% if page_obj.previous_page_number != 0 %}
        <li>
          <a class="pagination-link" href="?{% param_replace page=page_obj.previous_page_number %}">
            {{ page_obj.previous_page_number }}
          </a>
        </li>
      {% endif %}
    {% endif %}

    {% comment %} CURRENT {% endcomment %}
    <li>
      <a class="pagination-link is-current has-background-primary" aria-current="page">
        {{ page_obj.number}}
      </a>
    </li>
    {% comment %} CURRENT {% endcomment %}
    
    {% if page_obj.has_next %}
      {% if page_obj.next_page_number <= paginator.num_pages %}
        <li>
          <a class="pagination-link" href="?{% param_replace page=page_obj.next_page_number %}">
            {{ page_obj.next_page_number }}
          </a>
        </li>
      {% endif %}
    {% endif %}
      
    <li>
      <span class="pagination-ellipsis">&hellip;</span>
    </li>

    {% if page_obj.has_next %}
      <li>
        <a class="pagination-link" href="?{% param_replace page=paginator.num_pages %}">Last</a>
      </li>
    {% endif %}

  </ul>


</nav>
{% endif %}

<hr />

{% endblock content-dashboard %}
